<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>손안에 가이드 (v2.0)</title>
    <style>
        body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background-color: #000; color: #fff; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        .hidden { display: none !important; }
        #camera-view, #result-view { width: 100%; height: 100%; display: flex; flex-direction: column; position: absolute; top: 0; left: 0; transition: transform 0.3s ease-in-out; }
        #camera-view { z-index: 10; }
        #result-view { z-index: 20; transform: translateX(100%); }
        #camera-view.hidden { transform: translateX(-100%); }
        #result-view.visible { transform: translateX(0); }
        #camera-feed { width: 100%; height: 100%; object-fit: cover; }
        #result-image { width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0; z-index: 1; }
        .overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: space-between; background: linear-gradient(to top, rgba(0,0,0,0.7), transparent 40%); }
        .controls { padding: 20px; display: flex; justify-content: space-around; align-items: center; }
        .control-btn { width: 64px; height: 64px; border-radius: 50%; border: 3px solid white; background-color: rgba(255,255,255,0.3); cursor: pointer; }
        #shoot-btn { background-color: white; }
        #result-text { flex-grow: 1; overflow-y: auto; padding: 20px; font-size: 1.2em; line-height: 1.6; text-shadow: 1px 1px 3px #000; }
        #loader { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 30; text-align: center; }
        .spinner { width: 40px; height: 40px; border: 4px solid rgba(255,255,255,0.3); border-top-color: #fff; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <!-- 카메라 화면 -->
    <div id="camera-view">
        <video id="camera-feed" playsinline autoplay></video>
        <canvas id="capture-canvas" class="hidden"></canvas>
        <div class="overlay">
            <div></div> <!-- Top spacer -->
            <div class="controls">
                <button id="upload-btn" class="control-btn" aria-label="업로드"></button>
                <input type="file" id="upload-input" accept="image/*" class="hidden">
                <button id="shoot-btn" aria-label="촬영"></button>
                <button id="mic-btn" class="control-btn" aria-label="음성 인식"></button>
            </div>
        </div>
    </div>

    <!-- 결과 화면 -->
    <div id="result-view">
        <img id="result-image" src="" alt="분석된 이미지">
        <div class="overlay">
            <div id="result-text"></div>
            <div class="controls">
                <button id="back-btn" class="control-btn" aria-label="뒤로가기"></button>
            </div>
        </div>
    </div>

    <!-- 로딩 스피너 -->
    <div id="loader" class="hidden">
        <div class="spinner"></div>
        <p>분석 중...</p>
    </div>

    <!-- 모든 로직을 담은 단일 JS 파일 -->
    <script src="main.js"></script>

</body>
</html>